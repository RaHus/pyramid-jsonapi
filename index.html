<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pyramid-jsonapi Documentation &mdash; pyramid-jsonapi 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyramid-jsonapi 0.0.1 documentation" href="#" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">pyramid-jsonapi 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="pyramid-jsonapi-documentation">
<h1>pyramid-jsonapi Documentation<a class="headerlink" href="#pyramid-jsonapi-documentation" title="Permalink to this headline">¶</a></h1>
<p>Create a JSON-API (<a class="reference external" href="http://jsonapi.org/">http://jsonapi.org/</a>) standard API from a database using
the sqlAlchemy ORM and pyramid framework.</p>
<p>The core idea behind pyramid-jsonapi is to create a working JSON-API
automatically, starting from the sort of <code class="docutils literal"><span class="pre">models.py</span></code> file shipped with a
typical pyramid + sqlalchemy application.</p>
<p>If you are reading this document directly from the repository on github
(<a class="reference external" href="https://github.com/colinhiggs/pyramid-jsonapi">https://github.com/colinhiggs/pyramid-jsonapi</a>) you may notice some
oddities. In particular, internal links to things like <code class="docutils literal"><span class="pre">:py:func:`blah`</span></code> which
don&#8217;t work. That&#8217;s because those directives are designed to be consumed by
sphinx (<a class="reference external" href="http://www.sphinx-doc.org/">http://www.sphinx-doc.org/</a>). You can view the same document after
it has been run through sphinx, as well as the API documentation, at the
pyramid_jsonapi documentation page
(<a class="reference external" href="https://colinhiggs.github.io/pyramid-jsonapi/">https://colinhiggs.github.io/pyramid-jsonapi/</a>).</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>There is a test release on testpypi:
<a class="reference external" href="https://testpypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi">https://testpypi.python.org/pypi?:action=display&amp;name=pyramid_jsonapi</a>. You
can install it (perhaps into a virtualenv for play purposes) with</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install -i https://testpypi.python.org/pypi pyramid_jsonapi
</pre></div>
</div>
<p>or, since there is only one file, you can download the development version from
<a class="reference external" href="https://github.com/colinhiggs/pyramid-jsonapi">https://github.com/colinhiggs/pyramid-jsonapi</a> and copy the pyramid_jsonapi
directory into your PYTHONPATH or into your project.</p>
</div>
<div class="section" id="auto-creating-an-api">
<h2>Auto-Creating an API<a class="headerlink" href="#auto-creating-an-api" title="Permalink to this headline">¶</a></h2>
<p>Declare your models somewhere using sqlalchemy&#8217;s
<code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.ext.declarative.declarative_base()</span></code>. In this documentation we
assume that you have done so in a file called <code class="docutils literal"><span class="pre">models.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;people&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">BigInteger</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">autoincrement</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Text</span><span class="p">)</span>
    <span class="n">blogs</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Blog&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s1">&#39;Post&#39;</span><span class="p">,</span> <span class="n">backref</span><span class="o">=</span><span class="s1">&#39;author&#39;</span><span class="p">)</span>

<span class="c1"># and the rest...</span>
</pre></div>
</div>
<p>If you are happy with the defaults, you can get away with the following
additions to the standard pyramid alchemy scaffold&#8217;s top level <code class="docutils literal"><span class="pre">__init__.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyramid_jsonapi</span>
<span class="c1"># Or &#39;from . import pyramid_jsonapi&#39; if you copied pyramid_jsonapi directly</span>
<span class="c1"># into your project.</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span> <span class="c1"># Your models module.</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">global_config</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>

  <span class="c1"># The usual stuff from the pyramid alchemy scaffold.</span>
  <span class="n">engine</span> <span class="o">=</span> <span class="n">engine_from_config</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;sqlalchemy.&#39;</span><span class="p">)</span>
  <span class="n">models</span><span class="o">.</span><span class="n">DBSession</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
  <span class="n">models</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">bind</span> <span class="o">=</span> <span class="n">engine</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">Configurator</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">)</span>

  <span class="c1"># pyramid_jsonapi uses the renderer labeled &#39;json&#39;. As usual, if you have</span>
  <span class="c1"># any types to serialise that the default JSON renderer can&#39;t handle, you</span>
  <span class="c1"># must alter it. For example:</span>
  <span class="n">renderer</span> <span class="o">=</span> <span class="n">JSON</span><span class="p">()</span>
  <span class="n">renderer</span><span class="o">.</span><span class="n">add_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">datetime_adapter</span><span class="p">)</span>
  <span class="n">config</span><span class="o">.</span><span class="n">add_renderer</span><span class="p">(</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="p">)</span>

  <span class="c1"># Create the routes and views automagically:</span>
  <span class="n">pyramid_jsonapi</span><span class="o">.</span><span class="n">create_jsonapi_using_magic_and_pixie_dust</span><span class="p">(</span>
    <span class="n">config</span><span class="p">,</span> <span class="n">models</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">view</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">DBSession</span>
  <span class="p">)</span>
  <span class="c1"># The third argument above should be a callable which accepts a</span>
  <span class="c1"># CollectionView instance as an argument and returns a database session.</span>
  <span class="c1"># Notably the request is available as view.request, so if you&#39;re doing</span>
  <span class="c1"># something like this post</span>
  <span class="c1"># https://metaclassical.com/what-the-zope-transaction-manager-means-to-me-and-you</span>
  <span class="c1"># you can return the per-request session. In this case we just return the</span>
  <span class="c1"># usual DBSession from the models module.</span>

  <span class="c1"># Routes and views are added imperatively, so no need for a scan - unless</span>
  <span class="c1"># you have defined other routes and views declaratively.</span>
</pre></div>
</div>
<p>Yes, there really is a method called
<a class="reference internal" href="#pyramid_jsonapi.create_jsonapi_using_magic_and_pixie_dust" title="pyramid_jsonapi.create_jsonapi_using_magic_and_pixie_dust"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi_using_magic_and_pixie_dust()</span></code></a>. No, you
don&#8217;t <em>have</em> to call it that. If you are feeling more sensible you can use the
synonym <a class="reference internal" href="#pyramid_jsonapi.create_jsonapi" title="pyramid_jsonapi.create_jsonapi"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi()</span></code></a>.</p>
<div class="section" id="calling-pyramid-jsonapi-create-jsonapi">
<h3>Calling <a class="reference internal" href="#pyramid_jsonapi.create_jsonapi" title="pyramid_jsonapi.create_jsonapi"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi()</span></code></a><a class="headerlink" href="#calling-pyramid-jsonapi-create-jsonapi" title="Permalink to this headline">¶</a></h3>
<p>Since <a class="reference internal" href="#pyramid_jsonapi.create_jsonapi" title="pyramid_jsonapi.create_jsonapi"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi()</span></code></a> (or the one with pixie dust)
sits at the centre of the API creation, we&#8217;ll spend a little time now explaining
the three mandatory arguments.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">config</span></code> is the usual Configurator object used in pyramid.</li>
<li><code class="docutils literal"><span class="pre">models</span></code> can either be a module (as in the example above) defining classes
which inherit from <code class="xref py py-func docutils literal"><span class="pre">declarative_base()</span></code> or an iterable of such classes.</li>
<li><code class="docutils literal"><span class="pre">get_dbsession</span></code> (to which we passed the lambda function above) should be a
callable which accepts an instance of
<a class="reference internal" href="#pyramid_jsonapi.CollectionViewBase" title="pyramid_jsonapi.CollectionViewBase"><code class="xref py py-class docutils literal"><span class="pre">pyramid_jsonapi.CollectionViewBase</span></code></a> and returns a
<code class="xref py py-class docutils literal"><span class="pre">sqlalchemy.orm.session.Session</span></code> (or an equivalent, like a
<code class="xref py py-func docutils literal"><span class="pre">sqlalchemy.orm.scoped_session()</span></code>)</li>
</ul>
</div>
<div class="section" id="auto-create-assumptions">
<h3>Auto-Create Assumptions<a class="headerlink" href="#auto-create-assumptions" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Your model classes all inherit from a base class returned by sqlalchemy&#8217;s
<code class="docutils literal"><span class="pre">declarative-base()</span></code>.</li>
<li>Each model has a single primary_key column. This will be auto-detected and
copied to an attribute called <code class="docutils literal"><span class="pre">_jsonapi_id</span></code>, so...</li>
<li>...don&#8217;t create any columns called <code class="docutils literal"><span class="pre">_jsonapi_id</span></code>.</li>
<li>You are happy to give your collection end-points the same name as the
corresponding database table (for now).</li>
<li>You have defined any relationships to exposed via the API using
<code class="docutils literal"><span class="pre">sqlalchemy.orm.relationship()</span></code> (or <code class="docutils literal"><span class="pre">backref()</span></code>).</li>
<li>You are happy to expose any so defined relationship via a relationship URL.</li>
</ol>
<p>Some of those behaviours can be adjusted, see <a class="reference internal" href="#customising-the-generated-api">Customising the Generated API</a>.</p>
</div>
<div class="section" id="trying-your-api-out">
<h3>Trying Your API Out<a class="headerlink" href="#trying-your-api-out" title="Permalink to this headline">¶</a></h3>
<p>You should now have a working JSON-API. A quick test. The following assumes that
you have already created and set up a pyramid project in development mode
(<code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> in pyramid 1.6, <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span></code> in pyramid 1.7).</p>
<p>Make sure you have activated your virtualenv:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> env/bin/activate
</pre></div>
</div>
<p>Start the server:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pserv your_project/development.ini
</pre></div>
</div>
<p>Using the rather lovely httpie <a class="reference external" href="https://github.com/jkbrzt/httpie/">https://github.com/jkbrzt/httpie/</a> to test:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http http://localhost:6543/people

HTTP/1.1 <span class="m">200</span> OK
Content-Length: 1387
Content-Type: application/vnd.api+json<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>UTF-8
Date: Fri, <span class="m">28</span> Aug <span class="m">2015</span> 20:22:46 GMT
Server: waitress
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/people/1&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;&lt;some_single_relationship&gt;&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;rel_type&gt;&quot;</span><span class="p">,</span> <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;some_id&gt;&quot;</span><span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span><span class="nt">&quot;&lt;another_person&gt;&quot;</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <code class="docutils literal"><span class="pre">test_project/test_project/__init__.py</span></code> for a fully working
<code class="docutils literal"><span class="pre">__init__.py</span></code> file.</p>
<p>You don&#8217;t need a <code class="docutils literal"><span class="pre">views.py</span></code> unless you have some other routes and views.</p>
</div>
</div>
<div class="section" id="customising-the-generated-api">
<h2>Customising the Generated API<a class="headerlink" href="#customising-the-generated-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="selectively-passing-models-for-api-generation">
<h3>Selectively Passing Models for API Generation<a class="headerlink" href="#selectively-passing-models-for-api-generation" title="Permalink to this headline">¶</a></h3>
<p>Your database may have some tables which you do not wish to expose as collections in the generated API. You can be selective by:</p>
<ul class="simple">
<li>writing a models module with only the model classes you wish to expose; or</li>
<li>passing an iterable of only the model classes you wish to expose to
<a class="reference internal" href="#pyramid_jsonapi.create_jsonapi" title="pyramid_jsonapi.create_jsonapi"><code class="xref py py-func docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Permalink to this headline">¶</a></h3>
<p>At certain points during the processing of a request, <code class="docutils literal"><span class="pre">pyramid_jsonapi</span></code> will
invoke any callback functions which have been registered. Callback sequences are
currently implemented as ordinary lists: you add your callback functions using
<code class="docutils literal"><span class="pre">.append()</span></code>, remove them with <code class="docutils literal"><span class="pre">.pop()</span></code> and so on. The functions in each
callback list will be called in order at the appropriate point.</p>
</div>
<div class="section" id="available-callback-lists">
<h3>Available Callback Lists<a class="headerlink" href="#available-callback-lists" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="consuming-the-api-from-the-client-end">
<h2>Consuming the API from the Client End<a class="headerlink" href="#consuming-the-api-from-the-client-end" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-ing-resources">
<h3>GET-ing Resources<a class="headerlink" href="#get-ing-resources" title="Permalink to this headline">¶</a></h3>
<div class="section" id="a-collection">
<h4>A Collection<a class="headerlink" href="#a-collection" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;something insightful&quot;</span><span class="p">,</span>
        <span class="nt">&quot;published_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-01T00:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.main&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/author&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/author&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;blog&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blogs&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/blog&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/blog&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;comments&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
          <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/comments&quot;</span><span class="p">,</span>
            <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/comments&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ONETOMANY&quot;</span><span class="p">,</span>
            <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
              <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;... 5 more results ...&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;first&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nt">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that we have:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">data</span></code> which is an array of comments objects, each with:<ul>
<li><code class="docutils literal"><span class="pre">attributes</span></code>, as expected<ul>
<li>a <code class="docutils literal"><span class="pre">links</span></code> object with:</li>
<li>a <code class="docutils literal"><span class="pre">self</span></code> link</li>
</ul>
</li>
<li>relationship objects for each relationship with:<ul>
<li><code class="docutils literal"><span class="pre">data</span></code> with resource identifiers for related objects</li>
<li><code class="docutils literal"><span class="pre">self</span></code> and <code class="docutils literal"><span class="pre">related</span></code> links</li>
<li>some other information about the relationship in <code class="docutils literal"><span class="pre">meta</span></code></li>
</ul>
</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">links</span></code> with:<ul>
<li><code class="docutils literal"><span class="pre">self</span></code> and</li>
<li><code class="docutils literal"><span class="pre">pagination</span></code> links</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">meta</span></code> with:<ul>
<li>some extra information about the number of results returned.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-single-resource">
<h4>A Single Resource<a class="headerlink" href="#a-single-resource" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts/1
</pre></div>
</div>
<p>Returns a single resource object in <code class="docutils literal"><span class="pre">data</span></code> and no pagination links.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;something insightful&quot;</span><span class="p">,</span>
      <span class="nt">&quot;published_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-01T00:00:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.main&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/author&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/author&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;blog&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;blogs&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/blog&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/blog&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;comments&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/comments&quot;</span><span class="p">,</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1/relationships/comments&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;ONETOMANY&quot;</span><span class="p">,</span>
          <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">0</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/1&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sparse-fieldsets">
<h4>Sparse Fieldsets<a class="headerlink" href="#sparse-fieldsets" title="Permalink to this headline">¶</a></h4>
<p>We can ask only for certain fields (attributes and relationships are
collectively known as fields).</p>
<p>Use the <code class="docutils literal"><span class="pre">fields</span></code> parameter, parameterized by collection name
(fields[collection]), with the value set as a comma separated list of field
names.</p>
<p>So, to return only the title attribute and author relationship of each post:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?fields<span class="o">[</span>posts<span class="o">]=</span>title,author
</pre></div>
</div>
<p>The resulting json has a <code class="docutils literal"><span class="pre">data</span></code> element with a list of objects something like
this:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: bob.second&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;related&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6/author&quot;</span><span class="p">,</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/6/relationships/author&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="s2">&quot;MANYTOONE&quot;</span><span class="p">,</span>
        <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<h4>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h4>
<p>You can specify a sorting attribute and order with the sort query parameter.</p>
<p>Sort posts by title:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?sort<span class="o">=</span>title
</pre></div>
</div>
<p>and in reverse:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?sort<span class="o">=</span>-title
</pre></div>
</div>
<p>Sorting by multiple attributes (e.g. <code class="docutils literal"><span class="pre">sort=title,content</span></code>) and sorting by attributes of related objects (<cite>sort=author.name</cite>) are supported.</p>
<p>A sort on id is assumed unless the sort parameter is specified.</p>
</div>
<div class="section" id="pagination">
<h4>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h4>
<p>You can specify the pagination limit and offset:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ http GET http://localhost:6543/posts?fields<span class="o">[</span>posts<span class="o">]=</span>title<span class="se">\&amp;</span>page<span class="o">[</span>limit<span class="o">]=</span>2<span class="se">\&amp;</span>page<span class="o">[</span>offset<span class="o">]=</span>2
</pre></div>
</div>
<p>We asked for only the <code class="docutils literal"><span class="pre">title</span></code> field above so that the results would be more
compact...</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: alice.second&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/3&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;post1: bob.main&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts/4&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;posts&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;first&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;prev&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?page%5Blimit%5D=2&amp;sort=id&amp;page%5Boffset%5D=0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:6543/posts?fields[posts]=title&amp;page[limit]=2&amp;page[offset]=2&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nt">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;offset&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;returned&quot;</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There&#8217;s a default page limit which is used if the limit is not specified and a
maximum limit that the server will allow. Both of these can be set in the ini
file.</p>
</div>
<div class="section" id="filtering">
<h4>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h4>
<p>The JSON API spec doesn&#8217;t say much about filtering syntax, other than that it
should use the parameter key <code class="docutils literal"><span class="pre">filter</span></code>. In this implementation, we use syntax
like the following:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="nb">filter</span><span class="p">[</span><span class="o">&lt;</span><span class="n">attribute_spec</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">operator</span><span class="o">&gt;</span><span class="p">]</span><span class="o">=&lt;</span><span class="n">value</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">attribute_spec</span></code> is either a direct attribute name or a dotted path to an
attribute via relationhips.</li>
<li><code class="docutils literal"><span class="pre">operator</span></code> is one of the list of supported operators (<a class="reference internal" href="#filter-operators">Filter Operators</a>).</li>
<li><code class="docutils literal"><span class="pre">value</span></code> is the value to match on.</li>
</ul>
<p>This is simple and reasonably effective. It&#8217;s a little awkward on readability though. If you feel that you have a syntax that is more readable, more powerful, easier to parse or has some other advantage, let me know - I&#8217;d be interested in any thoughts.</p>
<div class="section" id="filter-operators">
<h5>Filter Operators<a class="headerlink" href="#filter-operators" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">eq</span></code></li>
<li><code class="docutils literal"><span class="pre">ne</span></code></li>
<li><code class="docutils literal"><span class="pre">startswith</span></code></li>
<li><code class="docutils literal"><span class="pre">endswith</span></code></li>
<li><code class="docutils literal"><span class="pre">contains</span></code></li>
<li><code class="docutils literal"><span class="pre">lt</span></code></li>
<li><code class="docutils literal"><span class="pre">gt</span></code></li>
<li><code class="docutils literal"><span class="pre">le</span></code></li>
<li><code class="docutils literal"><span class="pre">ge</span></code></li>
<li><code class="docutils literal"><span class="pre">like</span></code> or <code class="docutils literal"><span class="pre">ilike</span></code>. Note that both of these use &#8216;*&#8217; in place of &#8216;%&#8217; to
avoid much URL escaping.</li>
</ul>
</div>
<div class="section" id="filter-examples">
<h5>Filter Examples<a class="headerlink" href="#filter-examples" title="Permalink to this headline">¶</a></h5>
<p>Find all the people with name &#8216;alice&#8217;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/people?filter<span class="o">[</span>name:eq<span class="o">]=</span>alice
</pre></div>
</div>
<p>Find all the posts published after 2015-01-03:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/posts?filter<span class="o">[</span>published_at:gt<span class="o">]=</span>2015-01-03
</pre></div>
</div>
<p>Find all the posts with &#8216;bob&#8217; somewhere in the title:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>http GET http://localhost:6543/posts?filter<span class="o">[</span>title:like<span class="o">]=</span>*bob*
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="reference-documentation">
<h2>Reference Documentation<a class="headerlink" href="#reference-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pyramid_jsonapi">
<span id="pyramid-jsonapi-module"></span><h3><a class="reference internal" href="#module-pyramid_jsonapi" title="pyramid_jsonapi"><code class="xref py py-mod docutils literal"><span class="pre">pyramid_jsonapi</span></code></a> Module<a class="headerlink" href="#module-pyramid_jsonapi" title="Permalink to this headline">¶</a></h3>
<p>Tools for constructing a JSON-API from sqlalchemy models in Pyramid.</p>
<dl class="function">
<dt id="pyramid_jsonapi.create_jsonapi">
<code class="descclassname">pyramid_jsonapi.</code><code class="descname">create_jsonapi</code><span class="sig-paren">(</span><em>config</em>, <em>models</em>, <em>get_dbsession</em>, <em>engine=None</em>, <em>test_data=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#create_jsonapi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.create_jsonapi" title="Permalink to this definition">¶</a></dt>
<dd><p>Auto-create jsonapi from module or iterable of sqlAlchemy models.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> &#8211; <code class="docutils literal"><span class="pre">pyramid.config.Configurator</span></code> object from current app.</li>
<li><strong>models</strong> &#8211; an iterable (or module) of model classes derived
from DeclarativeMeta.</li>
<li><strong>get_dbsession</strong> &#8211; a callable shich returns a
sqlalchemy.orm.session.Session or equivalent.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>engine</strong> &#8211; a sqlalchemy.engine.Engine instance. Only required if using the
debug view.</li>
<li><strong>test_data</strong> &#8211; a module with an <code class="docutils literal"><span class="pre">add_to_db()</span></code> method which will populate
the database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_jsonapi.create_jsonapi_using_magic_and_pixie_dust">
<code class="descclassname">pyramid_jsonapi.</code><code class="descname">create_jsonapi_using_magic_and_pixie_dust</code><span class="sig-paren">(</span><em>config</em>, <em>models</em>, <em>get_dbsession</em>, <em>engine=None</em>, <em>test_data=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyramid_jsonapi.create_jsonapi_using_magic_and_pixie_dust" title="Permalink to this definition">¶</a></dt>
<dd><p>Auto-create jsonapi from module or iterable of sqlAlchemy models.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> &#8211; <code class="docutils literal"><span class="pre">pyramid.config.Configurator</span></code> object from current app.</li>
<li><strong>models</strong> &#8211; an iterable (or module) of model classes derived
from DeclarativeMeta.</li>
<li><strong>get_dbsession</strong> &#8211; a callable shich returns a
sqlalchemy.orm.session.Session or equivalent.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>engine</strong> &#8211; a sqlalchemy.engine.Engine instance. Only required if using the
debug view.</li>
<li><strong>test_data</strong> &#8211; a module with an <code class="docutils literal"><span class="pre">add_to_db()</span></code> method which will populate
the database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_jsonapi.create_resource">
<code class="descclassname">pyramid_jsonapi.</code><code class="descname">create_resource</code><span class="sig-paren">(</span><em>config</em>, <em>model</em>, <em>get_dbsession</em>, <em>collection_name=None</em>, <em>allowed_fields=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#create_resource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.create_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a set of resource endpoints.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> &#8211; <code class="docutils literal"><span class="pre">pyramid.config.Configurator</span></code> object from current app.</li>
<li><strong>model</strong> &#8211; a model class derived from DeclarativeMeta.</li>
<li><strong>get_dbsession</strong> &#8211; a callable shich returns a
sqlalchemy.orm.session.Session or equivalent.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>collection_name</strong> &#8211; string name of collection. Passed through to
<code class="docutils literal"><span class="pre">collection_view_factory()</span></code></li>
<li><strong>allowed_fields</strong> &#8211; set of allowed field names. Passed through to
<code class="docutils literal"><span class="pre">collection_view_factory()</span></code></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pyramid_jsonapi.collection_view_factory">
<code class="descclassname">pyramid_jsonapi.</code><code class="descname">collection_view_factory</code><span class="sig-paren">(</span><em>model</em>, <em>get_dbsession</em>, <em>collection_name=None</em>, <em>allowed_fields=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#collection_view_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.collection_view_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a class to handle requests for model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> &#8211; a model class derived from DeclarativeMeta.</li>
<li><strong>get_dbsession</strong> &#8211; a callable shich returns a
sqlalchemy.orm.session.Session or equivalent.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><strong>collection_name</strong> &#8211; string name of collection.</li>
<li><strong>allowed_fields</strong> &#8211; set of allowed field names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="pyramid_jsonapi.CollectionViewBase">
<em class="property">class </em><code class="descclassname">pyramid_jsonapi.</code><code class="descname">CollectionViewBase</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all view classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<em>pyramid.request</em>) &#8211; passed by framework.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.jsonapi_view">
<code class="descname">jsonapi_view</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.jsonapi_view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.jsonapi_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for view functions. Adds jsonapi boilerplate.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle GET request for a single item.</p>
<p>Get a single item from the collection, referenced by id.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">},</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Get person 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">people</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.patch">
<code class="descname">patch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle PATCH request for a single item.</p>
<p>Update an existing item from a partially defined representation.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id</div></blockquote>
<p><strong>Request Body</strong></p>
<blockquote>
<div><strong>Partial resource object</strong> (<em>json</em>)</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;meta&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;updated&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="o">&lt;</span><span class="n">attribute_name</span><span class="o">&gt;</span><span class="p">,</span>
            <span class="o">&lt;</span><span class="n">attribute_name</span><span class="o">&gt;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>PATCH person 1, changing name to alicia:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">PATCH</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">people</span><span class="o">/</span><span class="mi">1</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;people&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;alicia&quot;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
<p>Change the author of posts/1 to people/2:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">PATCH</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;posts&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;people&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
<p>Set the comments on posts/1 to be [comments/4, comments/5]:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">PATCH</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;posts&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;relationships&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;comments&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle DELETE request for single item.</p>
<p>Delete the referenced item from the collection.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Resource Identifier for deleted object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">HTTPFailedDependency</span></code> &#8211; if collection/id does not exist</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>delete person 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">DELETE</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">people</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.collection_get">
<code class="descname">collection_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.collection_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.collection_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle GET requests for the collection.</p>
<p>Get a set of items from the collection, possibly matching search/filter
parameters. Optionally sort the results, page them, return only certain
fields, and include related resources.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><p><strong>include:</strong> comma separated list of related resources to include
in the include section.</p>
<p><strong>fields[&lt;collection&gt;]:</strong> comma separated list of fields
(attributes or relationships) to include in data.</p>
<p><strong>sort:</strong> comma separated list of sort keys.</p>
<p><strong>page[limit]:</strong> number of results to return per page.</p>
<p><strong>page[offset]:</strong> starting index for current page.</p>
<p><strong>filter[&lt;attribute&gt;:&lt;op&gt;]:</strong> filter operation.</p>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">resource</span> <span class="n">objects</span> <span class="p">],</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">links</span> <span class="nb">object</span> <span class="p">},</span>
    <span class="s2">&quot;include&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">optional</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">included</span> <span class="n">resource</span> <span class="n">objects</span> <span class="p">],</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">implementation</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">HTTPBadRequest</span></code></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Get up to default page limit people resources:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">people</span>
</pre></div>
</div>
<p>Get the second page of two people, reverse sorted by name and
include the related posts as included documents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>http GET http://localhost:6543/people?page[limit]=2&amp;page[offset]=2&amp;sort=-name&amp;include=posts
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.collection_post">
<code class="descname">collection_post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.collection_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.collection_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle POST requests for the collection.</p>
<p>Create a new object in collection.</p>
<p><strong>Request Body</strong></p>
<blockquote>
<div><p><strong>resource object</strong> (<em>json</em>) in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">},</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPForbidden</span></code> &#8211; if an id is presented in &#8220;data&#8221; and client ids are</li>
<li>not supported.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPConflict</span></code> &#8211; if type is not present or is different from the</li>
<li>collection name.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if a non existent relationship is referenced in the</li>
<li>supplied resource object.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPConflict</span></code> &#8211; if creating the object would break a database</li>
<li>constraint (most commonly if an id is supplied by the client and</li>
<li>an item with that id already exists).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Create a new person with name &#8216;monty&#8217; and let the server pick the
id:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">people</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;people&quot;</span><span class="p">,</span>
    <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;monty&quot;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.related_get">
<code class="descname">related_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.related_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.related_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle GET requests for related URLs.</p>
<p>Get object(s) related to a specified object.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id
<strong>relname</strong> (<em>str</em>): relationship name</div></blockquote>
<dl class="docutils">
<dt><strong>Query Parameters</strong></dt>
<dd><p class="first"><strong>sort:</strong> comma separated list of sort keys.</p>
<p class="last"><strong>filter[&lt;attribute&gt;:&lt;op&gt;]:</strong> filter operation.</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<p>For a TOONE relationship (return one object):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">},</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For a TOMANY relationship (return multiple objects):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">},</span> <span class="o">...</span> <span class="p">]</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if <cite>relname</cite> is not found as a relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPBadRequest</span></code> &#8211; if a bad filter is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Get the author of post 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">author</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.relationships_get">
<code class="descname">relationships_get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.relationships_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.relationships_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle GET requests for relationships URLs.</p>
<p>Get object identifiers for items referred to by a relationship.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id
<strong>relname</strong> (<em>str</em>): relationship name</div></blockquote>
<dl class="docutils">
<dt><strong>Query Parameters</strong></dt>
<dd><p class="first"><strong>sort:</strong> comma separated list of sort keys.</p>
<p class="last"><strong>filter[&lt;attribute&gt;:&lt;op&gt;]:</strong> filter operation.</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<p>For a TOONE relationship (return one identifier):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">},</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For a TOMANY relationship (return multiple identifiers):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">},</span> <span class="o">...</span> <span class="p">]</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">HTTPBadRequest</span></code> &#8211; if a bad filter is used.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Get an identifer for the author of post 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">GET</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">relationships</span><span class="o">/</span><span class="n">author</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.relationships_post">
<code class="descname">relationships_post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.relationships_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.relationships_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle POST requests for TOMANY relationships.</p>
<p>Add the specified member to the relationship.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id
<strong>relname</strong> (<em>str</em>): relationship name</div></blockquote>
<p><strong>Request Body</strong></p>
<blockquote>
<div><p><strong>resource identifier list</strong> (<em>json</em>) in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">},</span><span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if there is no &lt;relname&gt; relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if an attempt is made to modify a TOONE relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPConflict</span></code> &#8211; if a resource identifier is specified with a</li>
<li>different type than that which the collection holds.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPFailedDependency</span></code> &#8211; if a database constraint would be broken by</li>
<li>adding the specified resource to the relationship.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Add comments/1 as a comment of posts/1</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">POST</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">relationships</span><span class="o">/</span><span class="n">comments</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span> <span class="p">}</span>
<span class="p">]</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.relationships_patch">
<code class="descname">relationships_patch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.relationships_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.relationships_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle PATCH requests for relationships (TOMANY or TOONE).</p>
<p>Completely replace the raltionship membership.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id
<strong>relname</strong> (<em>str</em>): relationship name</div></blockquote>
<p><strong>Request Body</strong></p>
<blockquote>
<div><p><strong>resource identifier list</strong> (<em>json</em>) in the form:</p>
<p>TOONE relationship:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>TOMANY relationship:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">},</span><span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if there is no &lt;relname&gt; relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPConflict</span></code> &#8211; if a resource identifier is specified with a</li>
<li>different type than that which the collection holds.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPFailedDependency</span></code> &#8211; if a database constraint would be broken by</li>
<li>adding the specified resource to the relationship.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Replace comments list of posts/1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">PATCH</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">relationships</span><span class="o">/</span><span class="n">comments</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span> <span class="p">}</span>
<span class="p">]</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.relationships_delete">
<code class="descname">relationships_delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.relationships_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.relationships_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle DELETE requests for TOMANY relationships.</p>
<p>Delete the specified member from the relationship.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id
<strong>relname</strong> (<em>str</em>): relationship name</div></blockquote>
<p><strong>Request Body</strong></p>
<blockquote>
<div><p><strong>resource identifier list</strong> (<em>json</em>) in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">},</span><span class="o">...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="bp">self</span> <span class="n">url</span><span class="p">,</span>
        <span class="n">maybe</span> <span class="n">other</span> <span class="n">links</span><span class="o">...</span>
    <span class="p">},</span>
    <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">jsonapi</span> <span class="n">specific</span> <span class="n">information</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if there is no &lt;relname&gt; relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if an attempt is made to modify a TOONE relationship.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPConflict</span></code> &#8211; if a resource identifier is specified with a</li>
<li>different type than that which the collection holds.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPFailedDependency</span></code> &#8211; if a database constraint would be broken by</li>
<li>adding the specified resource to the relationship.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Delete comments/1 from posts/1 comments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">http</span> <span class="n">DELETE</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">6543</span><span class="o">/</span><span class="n">posts</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="n">relationships</span><span class="o">/</span><span class="n">comments</span> <span class="n">data</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;</span>
<span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;comments&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span> <span class="p">}</span>
<span class="p">]</span><span class="s1">&#39; Content-Type:application/vnd.api+json</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.single_item_query">
<code class="descname">single_item_query</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.single_item_query" title="Permalink to this definition">¶</a></dt>
<dd><p>A query representing the single item referenced by the request.</p>
<p><strong>URL (matchdict) Parameters</strong></p>
<blockquote>
<div><strong>id</strong> (<em>str</em>): resource id</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">query which will fetch item with id
&#8216;id&#8217;.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">sqlalchemy.orm.query.Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.single_return">
<code class="descname">single_return</code><span class="sig-paren">(</span><em>q</em>, <em>not_found_message=None</em>, <em>identifier=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.single_return"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.single_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Populate return dictionary for a single item.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>q</strong> (<em>sqlalchemy.orm.query.Query</em>) &#8211; query designed to return one item.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>not_found_message</strong> (<em>str or None</em>) &#8211; if an item is not found either:<ul>
<li>raise 404 with <code class="docutils literal"><span class="pre">not_found_message</span></code> if it is a str;</li>
<li>or return <code class="docutils literal"><span class="pre">{&quot;data&quot;:</span> <span class="pre">None}</span></code> if <code class="docutils literal"><span class="pre">not_found_message</span></code> is None.</li>
</ul>
</li>
<li><strong>identifier</strong> &#8211; return identifier if True, object if false.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="n">resource</span> <span class="nb">object</span> <span class="p">}</span>

    <span class="n">optionally</span><span class="o">...</span>
    <span class="s2">&quot;included&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">included</span> <span class="n">objects</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="n">resource</span> <span class="n">identifier</span> <span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> &#8211; if the item is not found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.collection_return">
<code class="descname">collection_return</code><span class="sig-paren">(</span><em>q</em>, <em>count=None</em>, <em>identifiers=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.collection_return"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.collection_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Populate return dictionary for collections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (<em>sqlalchemy.orm.query.Query</em>) &#8211; query designed to return multiple</li>
<li><strong>items.</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>count</strong> (<em>int</em>) &#8211; Number of items the query will return (if known).</li>
<li><strong>identifiers</strong> (<em>bool</em>) &#8211; return identifiers if True, objects if false.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>dict in the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">resource</span> <span class="n">objects</span> <span class="p">]</span>

    <span class="n">optionally</span><span class="o">...</span>
    <span class="s2">&quot;included&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">included</span> <span class="n">objects</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="n">resource</span> <span class="n">identifiers</span> <span class="p">]</span>
</pre></div>
</div>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">HTTPBadRequest</span></code> &#8211; If a count was not supplied and an attempt to call</li>
<li>q.count() failed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.query_add_sorting">
<code class="descname">query_add_sorting</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.query_add_sorting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.query_add_sorting" title="Permalink to this definition">¶</a></dt>
<dd><p>Add sorting to query.</p>
<p>Use information from the <code class="docutils literal"><span class="pre">sort</span></code> query parameter (via
<a class="reference internal" href="#pyramid_jsonapi.CollectionViewBase.collection_query_info" title="pyramid_jsonapi.CollectionViewBase.collection_query_info"><code class="xref py py-func docutils literal"><span class="pre">collection_query_info()</span></code></a>) to contruct an <code class="docutils literal"><span class="pre">order_by</span></code> clause on
the query.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="docutils literal"><span class="pre">_sort</span></code> key from <a class="reference internal" href="#pyramid_jsonapi.CollectionViewBase.collection_query_info" title="pyramid_jsonapi.CollectionViewBase.collection_query_info"><code class="xref py py-func docutils literal"><span class="pre">collection_query_info()</span></code></a></p>
</div>
<dl class="docutils">
<dt><strong>Query Parameters</strong></dt>
<dd><strong>sort:</strong> comma separated list of sort keys.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>q</strong> (<em>sqlalchemy.orm.query.Query</em>) &#8211; query</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">query with <code class="docutils literal"><span class="pre">order_by</span></code> clause.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">sqlalchemy.orm.query.Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.query_add_filtering">
<code class="descname">query_add_filtering</code><span class="sig-paren">(</span><em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.query_add_filtering"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.query_add_filtering" title="Permalink to this definition">¶</a></dt>
<dd><p>Add filtering clauses to query.</p>
<p>Use information from the <code class="docutils literal"><span class="pre">filter</span></code> query parameter (via
<a class="reference internal" href="#pyramid_jsonapi.CollectionViewBase.collection_query_info" title="pyramid_jsonapi.CollectionViewBase.collection_query_info"><code class="xref py py-func docutils literal"><span class="pre">collection_query_info()</span></code></a>) to filter query results.</p>
<p>Filter parameter structure:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">filter[&lt;attribute&gt;:&lt;op&gt;]=&lt;value&gt;</span></code></div></blockquote>
<p>where:</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">attribute</span></code> is an attribute of the queried object type.</p>
<p><code class="docutils literal"><span class="pre">op</span></code> is the comparison operator.</p>
<p><code class="docutils literal"><span class="pre">value</span></code> is the value the comparison operator should compare to.</p>
</div></blockquote>
<p>Valid comparison operators:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">eq</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__eq__</span></code></li>
<li><code class="docutils literal"><span class="pre">ne</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__ne__</span></code></li>
<li><code class="docutils literal"><span class="pre">startswith</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">startswith</span></code></li>
<li><code class="docutils literal"><span class="pre">endswith</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">endswith</span></code></li>
<li><code class="docutils literal"><span class="pre">contains</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">contains</span></code></li>
<li><code class="docutils literal"><span class="pre">lt</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__lt__</span></code></li>
<li><code class="docutils literal"><span class="pre">gt</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__gt__</span></code></li>
<li><code class="docutils literal"><span class="pre">le</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__le__</span></code></li>
<li><code class="docutils literal"><span class="pre">ge</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">__ge__</span></code></li>
<li><code class="docutils literal"><span class="pre">like</span></code> or <code class="docutils literal"><span class="pre">ilike</span></code> as sqlalchemy <code class="docutils literal"><span class="pre">like</span></code> or <code class="docutils literal"><span class="pre">ilike</span></code>, except
replace any &#8216;*&#8217; with &#8216;%&#8217; (so that &#8216;*&#8217; acts as a wildcard)</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="docutils literal"><span class="pre">_filters</span></code> key from <a class="reference internal" href="#pyramid_jsonapi.CollectionViewBase.collection_query_info" title="pyramid_jsonapi.CollectionViewBase.collection_query_info"><code class="xref py py-func docutils literal"><span class="pre">collection_query_info()</span></code></a></p>
</div>
<dl class="docutils">
<dt><strong>Query Parameters</strong></dt>
<dd><strong>filter[&lt;attribute&gt;:&lt;op&gt;]:</strong> filter operation.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>q</strong> (<em>sqlalchemy.orm.query.Query</em>) &#8211; query</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">filtered query.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">sqlalchemy.orm.query.Query</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Get people whose name is &#8216;alice&#8217;</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>http GET http://localhost:6543/people?filter[name:eq]=alice
</pre></div>
</div>
<p>Get posts published after 2015-01-03:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>http GET http://localhost:6543/posts?filter[published_at:gt]=2015-01-03
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.related_limit">
<code class="descname">related_limit</code><span class="sig-paren">(</span><em>relationship</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.related_limit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.related_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Paging limit for related resources.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>page[limit:relationships:&lt;relname&gt;]:</strong> number of results to
return per page for related resource &lt;relname&gt;.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>relationship</strong> (<em>sqlalchemy.orm.relationships.RelationshipProperty</em>) &#8211; the relationship to get the limit for.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">paging limit for related resources.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.related_query">
<code class="descname">related_query</code><span class="sig-paren">(</span><em>obj_id</em>, <em>relationship</em>, <em>full_object=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.related_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.related_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct query for related objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj_id</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; id of an item in this view&#8217;s collection.</li>
<li><strong>relationship</strong> (<em>sqlalchemy.orm.relationships.RelationshipProperty</em>) &#8211; the relationships to get related objects from.</li>
<li><strong>full_object</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; if full_object is <code class="docutils literal"><span class="pre">True</span></code>, query for all
requested columns (probably to build resource objects). If
full_object is False, only query for the key column (probably
to build resource identifiers).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">query which will fetch related
object(s).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">sqlalchemy.orm.query.Query</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.serialise_db_item">
<code class="descname">serialise_db_item</code><span class="sig-paren">(</span><em>item</em>, <em>included</em>, <em>include_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.serialise_db_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.serialise_db_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialise an individual database item to JSON-API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>item</strong> &#8211; item to serialise.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>included</strong> (<em>dict</em>) &#8211; dictionary to be filled with included resource
objects.</li>
<li><strong>include_path</strong> (<em>list</em>) &#8211; list tracking current include path for
recursive calls.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">resource object dictionary.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="pyramid_jsonapi.CollectionViewBase.collection_query_info">
<em class="property">classmethod </em><code class="descname">collection_query_info</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.collection_query_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.collection_query_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return dictionary of information used during DB query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<em>pyramid.request</em>) &#8211; request object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">query info in the form:<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;page[limit]&#39;</span><span class="p">:</span> <span class="n">maximum</span> <span class="n">items</span> <span class="n">per</span> <span class="n">page</span><span class="p">,</span>
    <span class="s1">&#39;page[offset]&#39;</span><span class="p">:</span> <span class="n">offset</span> <span class="k">for</span> <span class="n">current</span> <span class="n">page</span> <span class="p">(</span><span class="ow">in</span> <span class="n">items</span><span class="p">),</span>
    <span class="s1">&#39;sort&#39;</span><span class="p">:</span> <span class="n">sort</span> <span class="n">param</span> <span class="kn">from</span> <span class="nn">request</span><span class="p">,</span>
    <span class="s1">&#39;_sort&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="n">sort</span> <span class="n">key</span> <span class="p">(</span><span class="s1">&#39;field&#39;</span> <span class="ow">or</span> <span class="s1">&#39;relationship.field&#39;</span><span class="p">),</span>
            <span class="s1">&#39;ascending&#39;</span><span class="p">:</span> <span class="n">sort</span> <span class="n">ascending</span> <span class="ow">or</span> <span class="n">descending</span> <span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="o">...</span>
    <span class="p">},</span>
    <span class="s1">&#39;_filters&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">filter_param_name</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;colspec&#39;</span><span class="p">:</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">columns</span> <span class="n">split</span> <span class="n">on</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="nb">filter</span> <span class="n">operator</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span> <span class="n">of</span> <span class="nb">filter</span> <span class="n">param</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">&#39;_page&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">paging_param_name</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Keys beginning with &#8216;_&#8217; are derived.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.pagination_links">
<code class="descname">pagination_links</code><span class="sig-paren">(</span><em>count=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.pagination_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.pagination_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of pagination links.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>count</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; total number of results available.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary of named links.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_field_names">
<code class="descname">requested_field_names</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_field_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the sparse field names from request.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>fields[&lt;collection&gt;]:</strong> comma separated list of fields
(attributes or relationships) to include in data.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">set of fields names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#set" title="(in Python v2.7)">set</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_attributes">
<code class="descname">requested_attributes</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of attributes.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>fields[&lt;collection&gt;]:</strong> comma separated list of fields
(attributes or relationships) to include in data.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">&lt;</span><span class="n">colname</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">column_object</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_relationships">
<code class="descname">requested_relationships</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_relationships" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of relationships.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>fields[&lt;collection&gt;]:</strong> comma separated list of fields
(attributes or relationships) to include in data.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">&lt;</span><span class="n">relname</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">relationship_object</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_fields">
<code class="descname">requested_fields</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Union of attributes and relationships.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>fields[&lt;collection&gt;]:</strong> comma separated list of fields
(attributes or relationships) to include in data.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict in the form:<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">&lt;</span><span class="n">colname</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">column_object</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="o">&lt;</span><span class="n">relname</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">relationship_object</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_relationships_local_columns">
<code class="descname">requested_relationships_local_columns</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_relationships_local_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all the local columns for MANYTOONE relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">local columns indexed by column name.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_query_columns">
<code class="descname">requested_query_columns</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_query_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>All columns required in query to fetch requested fields from db.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Union of requested_attributes and
requested_relationships_local_columns</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.requested_include_names">
<code class="descname">requested_include_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.requested_include_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.requested_include_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse any &#8216;include&#8217; param in http request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">names of all requested includes.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#set" title="(in Python v2.7)">set</a></td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Default:</dt>
<dd>set: names of all direct relationships of self.model.</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.CollectionViewBase.bad_include_paths">
<code class="descname">bad_include_paths</code><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.bad_include_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a set of invalid &#8216;include&#8217; parameters.</p>
<p><strong>Query Parameters</strong></p>
<blockquote>
<div><strong>include:</strong> comma separated list of related resources to include
in the include section.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">set of requested include paths with no corresponding
attribute.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#set" title="(in Python v2.7)">set</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.CollectionViewBase.view_instance">
<code class="descname">view_instance</code><span class="sig-paren">(</span><em>model</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#CollectionViewBase.view_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.CollectionViewBase.view_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>(memoised) get an instance of view class for model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>model</strong> (<em>DeclarativeMeta</em>) &#8211; model class.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">subclass of CollectionViewBase providing view for <code class="docutils literal"><span class="pre">model</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">class</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyramid_jsonapi.DebugView">
<em class="property">class </em><code class="descclassname">pyramid_jsonapi.</code><code class="descname">DebugView</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#DebugView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.DebugView" title="Permalink to this definition">¶</a></dt>
<dd><p>Pyramid view class defining a debug API.</p>
<p>These are available as <code class="docutils literal"><span class="pre">/debug/{action}</span></code> if
<code class="docutils literal"><span class="pre">jsonapi.debug.debug_endpoints</span> <span class="pre">==</span> <span class="pre">'true'</span></code>.</p>
<dl class="attribute">
<dt id="pyramid_jsonapi.DebugView.engine">
<code class="descname">engine</code><a class="headerlink" href="#pyramid_jsonapi.DebugView.engine" title="Permalink to this definition">¶</a></dt>
<dd><p>sqlalchemy engine with connection to the db.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.DebugView.metadata">
<code class="descname">metadata</code><a class="headerlink" href="#pyramid_jsonapi.DebugView.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>sqlalchemy model metadata</p>
</dd></dl>

<dl class="attribute">
<dt id="pyramid_jsonapi.DebugView.test_data">
<code class="descname">test_data</code><a class="headerlink" href="#pyramid_jsonapi.DebugView.test_data" title="Permalink to this definition">¶</a></dt>
<dd><p>module with an <code class="docutils literal"><span class="pre">add_to_db()</span></code> method which will populate
the database</p>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.DebugView.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#DebugView.drop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.DebugView.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop all tables from the database!!!</p>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.DebugView.populate">
<code class="descname">populate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#DebugView.populate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.DebugView.populate" title="Permalink to this definition">¶</a></dt>
<dd><p>Create tables and populate with test data.</p>
</dd></dl>

<dl class="method">
<dt id="pyramid_jsonapi.DebugView.reset">
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyramid_jsonapi.html#DebugView.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyramid_jsonapi.DebugView.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>The same as &#8216;drop&#8217; and then &#8216;populate&#8217;.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyramid-jsonapi Documentation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#auto-creating-an-api">Auto-Creating an API</a><ul>
<li><a class="reference internal" href="#calling-pyramid-jsonapi-create-jsonapi">Calling <code class="docutils literal"><span class="pre">pyramid_jsonapi.create_jsonapi()</span></code></a></li>
<li><a class="reference internal" href="#auto-create-assumptions">Auto-Create Assumptions</a></li>
<li><a class="reference internal" href="#trying-your-api-out">Trying Your API Out</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customising-the-generated-api">Customising the Generated API</a><ul>
<li><a class="reference internal" href="#selectively-passing-models-for-api-generation">Selectively Passing Models for API Generation</a></li>
<li><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li><a class="reference internal" href="#available-callback-lists">Available Callback Lists</a></li>
</ul>
</li>
<li><a class="reference internal" href="#consuming-the-api-from-the-client-end">Consuming the API from the Client End</a><ul>
<li><a class="reference internal" href="#get-ing-resources">GET-ing Resources</a><ul>
<li><a class="reference internal" href="#a-collection">A Collection</a></li>
<li><a class="reference internal" href="#a-single-resource">A Single Resource</a></li>
<li><a class="reference internal" href="#sparse-fieldsets">Sparse Fieldsets</a></li>
<li><a class="reference internal" href="#sorting">Sorting</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#filtering">Filtering</a><ul>
<li><a class="reference internal" href="#filter-operators">Filter Operators</a></li>
<li><a class="reference internal" href="#filter-examples">Filter Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#reference-documentation">Reference Documentation</a><ul>
<li><a class="reference internal" href="#module-pyramid_jsonapi"><code class="docutils literal"><span class="pre">pyramid_jsonapi</span></code> Module</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">pyramid-jsonapi 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Colin Higgs.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.2.
    </div>
  </body>
</html>